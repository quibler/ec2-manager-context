<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Simplified Receipt design 3 without parseFloat in template -->
    <record id="pos_receipt_design3_image" model="pos.receipt">
        <field name="name">Design 3 (With Image)</field>
        <field name="design_receipt"><![CDATA[

        <div class="pos-receipt">
            <!-- Company Logo -->
            <t t-if="env.services.pos.config.logo">
                <img t-att-src="'data:image/png;base64,' + env.services.pos.config.logo"
                     alt="Logo" class="pos-receipt-logo"/>
                <br />
            </t>

            <!-- Company Information -->
            <div class="pos-receipt-contact" style="text-align:center;">
                <t t-if="env.services.pos.company.name">
                    <div style="font-size:16px; font-weight:bold;"><t t-esc="env.services.pos.company.name" /></div>
                </t>
                <t t-if="env.services.pos.company.phone">
                    <div>Tel: <t t-esc="env.services.pos.company.phone" /></div>
                </t>
                <t t-if="env.services.pos.company.vat">
                    <div><t t-esc="env.services.pos.company.vat_label"/>: <t t-esc="env.services.pos.company.vat" /></div>
                </t>
                <t t-if="env.services.pos.company.email">
                    <div><t t-esc="env.services.pos.company.email" /></div>
                </t>
                <t t-if="env.services.pos.company.website">
                    <div><t t-esc="env.services.pos.company.website" /></div>
                </t>
            </div>

            <div style="text-align:center; margin: 10px 0;">
                ================================
            </div>

            <!-- Order Information -->
            <div style="font-size:14px;">
                <div><strong>Order:</strong> <t t-esc="props.receipt.name || props.order.name" /></div>
                <div><strong>Date:</strong> <t t-esc="props.receipt.date" /></div>
                <t t-if="props.receipt.headerData.cashier">
                    <div><strong>Cashier:</strong> <t t-esc="props.receipt.headerData.cashier" /></div>
                </t>
                <!-- Sales Person Display -->
                <t t-if="props.receipt.sales_person">
                    <div><strong>Sales Person:</strong> <t t-esc="props.receipt.sales_person" /></div>
                </t>
                <t t-if="props.order.partner_id">
                    <div><strong>Customer:</strong> <t t-esc="props.order.partner_id.name" /></div>
                </t>
            </div>

            <div style="text-align:center; margin: 10px 0;">
                ================================
            </div>

            <!-- Order Lines -->
            <table class="receipt-orderlines" style="width:100%; font-size:14px;">
                <thead>
                    <tr>
                        <th style="text-align:left; width:50%;">Item</th>
                        <th style="text-align:center; width:15%;">Qty</th>
                        <th style="text-align:right; width:15%;">Price</th>
                        <th style="text-align:right; width:20%;">Total</th>
                    </tr>
                    <tr>
                        <td colspan="4"><hr style="border-style:dashed;" /></td>
                    </tr>
                </thead>
                <tbody>
                    <t t-if="props.orderlines and props.orderlines.length">
                        <t t-foreach="props.orderlines" t-as="line" t-key="line_index">
                            <tr>
                                <td style="text-align:left;">
                                    <t t-esc="line.productName"/>
                                    <t t-if="line.discount and line.discount > 0">
                                        <div style="font-size:12px; color:#666;">
                                            <t t-esc="line.discount"/>% discount
                                        </div>
                                    </t>
                                    <t t-if="line.customerNote">
                                        <div style="font-size:12px; font-style:italic;">
                                            Note: <t t-esc="line.customerNote"/>
                                        </div>
                                    </t>
                                </td>
                                <td style="text-align:center;">
                                    <t t-esc="line.qty"/>
                                </td>
                                <td style="text-align:right;">
                                    <t t-esc="props.formatCurrency(line.unitPrice || line.price / line.qty)"/>
                                </td>
                                <td style="text-align:right;">
                                    <t t-esc="props.formatCurrency(line.price)"/>
                                </td>
                            </tr>
                        </t>
                    </t>
                </tbody>
            </table>

            <div style="text-align:center; margin: 10px 0;">
                --------------------------------
            </div>

            <!-- Totals Section -->
            <div style="font-size:14px;">
                <t t-set="taxincluded" t-value="Math.abs(props.receipt.amount_total - props.receipt.total_with_tax) &lt;= 0.000001" />

                <!-- Subtotal if taxes not included -->
                <t t-if="!taxincluded and props.data.total_without_tax">
                    <div style="text-align:right;">
                        <span>Subtotal: </span>
                        <span style="margin-left:20px;">
                            <t t-esc="props.formatCurrency(props.data.total_without_tax)"/>
                        </span>
                    </div>

                    <!-- Tax Details -->
                    <t t-if="props.data.tax_details">
                        <t t-foreach="props.data.tax_details" t-as="tax" t-key="tax_index">
                            <div style="text-align:right; font-size:13px;">
                                <span><t t-esc="tax.tax.name"/>: </span>
                                <span style="margin-left:20px;">
                                    <t t-esc="props.formatCurrency(tax.amount)"/>
                                </span>
                            </div>
                        </t>
                    </t>
                </t>

                <!-- Total -->
                <div style="text-align:right; font-size:16px; font-weight:bold; margin-top:5px;">
                    <span>TOTAL: </span>
                    <span style="margin-left:20px;">
                        <t t-esc="props.formatCurrency(props.data.amount_total)"/>
                    </span>
                </div>
            </div>

            <div style="text-align:center; margin: 10px 0;">
                ================================
            </div>

            <!-- Payment Details -->
            <div style="font-size:14px;">
                <t t-foreach="props.paymentlines" t-as="payment" t-key="payment_index">
                    <div style="text-align:right;">
                        <span><t t-esc="payment.name"/>: </span>
                        <span style="margin-left:20px;">
                            <t t-esc="props.formatCurrency(payment.amount)"/>
                        </span>
                    </div>
                </t>

                <!-- Change -->
                <t t-if="props.receipt.change and props.receipt.change > 0">
                    <div style="text-align:right; font-weight:bold; margin-top:5px;">
                        <span>Change: </span>
                        <span style="margin-left:20px;">
                            <t t-esc="props.formatCurrency(props.receipt.change)"/>
                        </span>
                    </div>
                </t>
            </div>

            <!-- Promotional Image Section -->
            <t t-if="env.services.pos.config.receipt_image">
                <div style="text-align:center; margin: 20px 0;">
                    <img t-att-src="'data:image/png;base64,' + env.services.pos.config.receipt_image"
                         alt="Promotion" style="max-width:200px; max-height:150px;"/>
                </div>
            </t>

            <!-- QR Code Section -->
            <t t-if="props.data.pos_qr_code">
                <div style="text-align:center; margin: 15px 0;">
                    <div style="font-size:12px; margin-bottom:5px;">
                        Need an invoice? Scan the QR code
                    </div>
                    <img t-att-src="props.data.pos_qr_code"
                         class="pos-receipt-logo" style="width:100px; height:100px;"/>
                    <div style="font-size:11px; margin-top:5px;">
                        Code: <t t-esc="props.data.ticket_code"/>
                    </div>
                </div>
            </t>

            <!-- Footer -->
            <div style="text-align:center; margin-top:20px;">
                <t t-if="props.receipt.footer">
                    <div style="white-space:pre-line; font-size:12px;">
                        <t t-esc="props.receipt.footer"/>
                    </div>
                </t>
                <div style="font-size:14px; font-weight:bold; margin-top:10px;">
                    Thank You For Your Business!
                </div>
                <div style="font-size:12px;">
                    Please Visit Again
                </div>
            </div>

            <!-- Powered by -->
            <div style="text-align:center; font-size:10px; margin-top:20px; color:#666;">
                Powered by Odoo
            </div>
        </div>]]></field>
    </record>
</odoo>